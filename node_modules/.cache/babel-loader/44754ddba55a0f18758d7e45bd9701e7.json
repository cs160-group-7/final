{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\n\nvar _constants = require('../constants');\n/**\n * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nclass Prompt {\n  _entering;\n  _value;\n  _onChange;\n  _onSuccess;\n  _onCancel;\n  _offset;\n  _promptLength;\n  _selection;\n\n  constructor() {\n    // Copied from `enter` to satisfy TS\n    this._entering = true;\n    this._value = '';\n    this._selection = null;\n    this._offset = -1;\n    this._promptLength = 0;\n    /* eslint-disable @typescript-eslint/no-empty-function */\n\n    this._onChange = () => {};\n\n    this._onSuccess = () => {};\n\n    this._onCancel = () => {};\n    /* eslint-enable */\n\n  }\n\n  _onResize = () => {\n    this._onChange();\n  };\n\n  enter(onChange, onSuccess, onCancel) {\n    this._entering = true;\n    this._value = '';\n    this._onSuccess = onSuccess;\n    this._onCancel = onCancel;\n    this._selection = null;\n    this._offset = -1;\n    this._promptLength = 0;\n\n    this._onChange = () => onChange(this._value, {\n      max: 10,\n      offset: this._offset\n    });\n\n    this._onChange();\n\n    process.stdout.on('resize', this._onResize);\n  }\n\n  setPromptLength(length) {\n    this._promptLength = length;\n  }\n\n  setPromptSelection(selected) {\n    this._selection = selected;\n  }\n\n  put(key) {\n    switch (key) {\n      case _constants.KEYS.ENTER:\n        this._entering = false;\n\n        this._onSuccess(this._selection || this._value);\n\n        this.abort();\n        break;\n\n      case _constants.KEYS.ESCAPE:\n        this._entering = false;\n\n        this._onCancel(this._value);\n\n        this.abort();\n        break;\n\n      case _constants.KEYS.ARROW_DOWN:\n        this._offset = Math.min(this._offset + 1, this._promptLength - 1);\n\n        this._onChange();\n\n        break;\n\n      case _constants.KEYS.ARROW_UP:\n        this._offset = Math.max(this._offset - 1, -1);\n\n        this._onChange();\n\n        break;\n\n      case _constants.KEYS.ARROW_LEFT:\n      case _constants.KEYS.ARROW_RIGHT:\n        break;\n\n      case _constants.KEYS.CONTROL_U:\n        this._value = '';\n        this._offset = -1;\n        this._selection = null;\n\n        this._onChange();\n\n        break;\n\n      default:\n        this._value = key === _constants.KEYS.BACKSPACE ? this._value.slice(0, -1) : this._value + key;\n        this._offset = -1;\n        this._selection = null;\n\n        this._onChange();\n\n        break;\n    }\n  }\n\n  abort() {\n    this._entering = false;\n    this._value = '';\n    process.stdout.removeListener('resize', this._onResize);\n  }\n\n  isEntering() {\n    return this._entering;\n  }\n\n}\n\nexports.default = Prompt;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","_constants","require","Prompt","_entering","_value","_onChange","_onSuccess","_onCancel","_offset","_promptLength","_selection","constructor","_onResize","enter","onChange","onSuccess","onCancel","max","offset","process","stdout","on","setPromptLength","length","setPromptSelection","selected","put","key","KEYS","ENTER","abort","ESCAPE","ARROW_DOWN","Math","min","ARROW_UP","ARROW_LEFT","ARROW_RIGHT","CONTROL_U","BACKSPACE","slice","removeListener","isEntering"],"sources":["/Users/wonjaelee/Desktop/final/node_modules/jest-watcher/build/lib/Prompt.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\n\nvar _constants = require('../constants');\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nclass Prompt {\n  _entering;\n  _value;\n  _onChange;\n  _onSuccess;\n  _onCancel;\n  _offset;\n  _promptLength;\n  _selection;\n\n  constructor() {\n    // Copied from `enter` to satisfy TS\n    this._entering = true;\n    this._value = '';\n    this._selection = null;\n    this._offset = -1;\n    this._promptLength = 0;\n    /* eslint-disable @typescript-eslint/no-empty-function */\n\n    this._onChange = () => {};\n\n    this._onSuccess = () => {};\n\n    this._onCancel = () => {};\n    /* eslint-enable */\n  }\n\n  _onResize = () => {\n    this._onChange();\n  };\n\n  enter(onChange, onSuccess, onCancel) {\n    this._entering = true;\n    this._value = '';\n    this._onSuccess = onSuccess;\n    this._onCancel = onCancel;\n    this._selection = null;\n    this._offset = -1;\n    this._promptLength = 0;\n\n    this._onChange = () =>\n      onChange(this._value, {\n        max: 10,\n        offset: this._offset\n      });\n\n    this._onChange();\n\n    process.stdout.on('resize', this._onResize);\n  }\n\n  setPromptLength(length) {\n    this._promptLength = length;\n  }\n\n  setPromptSelection(selected) {\n    this._selection = selected;\n  }\n\n  put(key) {\n    switch (key) {\n      case _constants.KEYS.ENTER:\n        this._entering = false;\n\n        this._onSuccess(this._selection || this._value);\n\n        this.abort();\n        break;\n\n      case _constants.KEYS.ESCAPE:\n        this._entering = false;\n\n        this._onCancel(this._value);\n\n        this.abort();\n        break;\n\n      case _constants.KEYS.ARROW_DOWN:\n        this._offset = Math.min(this._offset + 1, this._promptLength - 1);\n\n        this._onChange();\n\n        break;\n\n      case _constants.KEYS.ARROW_UP:\n        this._offset = Math.max(this._offset - 1, -1);\n\n        this._onChange();\n\n        break;\n\n      case _constants.KEYS.ARROW_LEFT:\n      case _constants.KEYS.ARROW_RIGHT:\n        break;\n\n      case _constants.KEYS.CONTROL_U:\n        this._value = '';\n        this._offset = -1;\n        this._selection = null;\n\n        this._onChange();\n\n        break;\n\n      default:\n        this._value =\n          key === _constants.KEYS.BACKSPACE\n            ? this._value.slice(0, -1)\n            : this._value + key;\n        this._offset = -1;\n        this._selection = null;\n\n        this._onChange();\n\n        break;\n    }\n  }\n\n  abort() {\n    this._entering = false;\n    this._value = '';\n    process.stdout.removeListener('resize', this._onResize);\n  }\n\n  isEntering() {\n    return this._entering;\n  }\n}\n\nexports.default = Prompt;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}