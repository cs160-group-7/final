{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\n\nfunction _jestWatcher() {\n  const data = require('jest-watcher');\n\n  _jestWatcher = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _FailedTestsInteractiveMode = _interopRequireDefault(require('../FailedTestsInteractiveMode'));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nclass FailedTestsInteractivePlugin extends _jestWatcher().BaseWatchPlugin {\n  _failedTestAssertions;\n  _manager = new _FailedTestsInteractiveMode.default(this._stdout);\n\n  apply(hooks) {\n    hooks.onTestRunComplete(results => {\n      this._failedTestAssertions = this.getFailedTestAssertions(results);\n      if (this._manager.isActive()) this._manager.updateWithResults(results);\n    });\n  }\n\n  getUsageInfo() {\n    var _this$_failedTestAsse;\n\n    if ((_this$_failedTestAsse = this._failedTestAssertions) !== null && _this$_failedTestAsse !== void 0 && _this$_failedTestAsse.length) {\n      return {\n        key: 'i',\n        prompt: 'run failing tests interactively'\n      };\n    }\n\n    return null;\n  }\n\n  onKey(key) {\n    if (this._manager.isActive()) {\n      this._manager.put(key);\n    }\n  }\n\n  run(_, updateConfigAndRun) {\n    return new Promise(resolve => {\n      if (!this._failedTestAssertions || this._failedTestAssertions.length === 0) {\n        resolve();\n        return;\n      }\n\n      this._manager.run(this._failedTestAssertions, failure => {\n        updateConfigAndRun({\n          mode: 'watch',\n          testNamePattern: failure ? `^${failure.fullName}$` : '',\n          testPathPattern: (failure === null || failure === void 0 ? void 0 : failure.path) || ''\n        });\n\n        if (!this._manager.isActive()) {\n          resolve();\n        }\n      });\n    });\n  }\n\n  getFailedTestAssertions(results) {\n    const failedTestPaths = [];\n\n    if ( // skip if no failed tests\n    results.numFailedTests === 0 || // skip if missing test results\n    !results.testResults || // skip if unmatched snapshots are present\n    results.snapshot.unmatched) {\n      return failedTestPaths;\n    }\n\n    results.testResults.forEach(testResult => {\n      testResult.testResults.forEach(result => {\n        if (result.status === 'failed') {\n          failedTestPaths.push({\n            fullName: result.fullName,\n            path: testResult.testFilePath\n          });\n        }\n      });\n    });\n    return failedTestPaths;\n  }\n\n}\n\nexports.default = FailedTestsInteractivePlugin;","map":{"version":3,"names":["Object","defineProperty","exports","value","default","_jestWatcher","data","require","_FailedTestsInteractiveMode","_interopRequireDefault","obj","__esModule","FailedTestsInteractivePlugin","BaseWatchPlugin","_failedTestAssertions","_manager","_stdout","apply","hooks","onTestRunComplete","results","getFailedTestAssertions","isActive","updateWithResults","getUsageInfo","_this$_failedTestAsse","length","key","prompt","onKey","put","run","_","updateConfigAndRun","Promise","resolve","failure","mode","testNamePattern","fullName","testPathPattern","path","failedTestPaths","numFailedTests","testResults","snapshot","unmatched","forEach","testResult","result","status","push","testFilePath"],"sources":["/Users/wonjaelee/Desktop/final/node_modules/@jest/core/build/plugins/FailedTestsInteractive.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\n\nfunction _jestWatcher() {\n  const data = require('jest-watcher');\n\n  _jestWatcher = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _FailedTestsInteractiveMode = _interopRequireDefault(\n  require('../FailedTestsInteractiveMode')\n);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {default: obj};\n}\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nclass FailedTestsInteractivePlugin extends _jestWatcher().BaseWatchPlugin {\n  _failedTestAssertions;\n  _manager = new _FailedTestsInteractiveMode.default(this._stdout);\n\n  apply(hooks) {\n    hooks.onTestRunComplete(results => {\n      this._failedTestAssertions = this.getFailedTestAssertions(results);\n      if (this._manager.isActive()) this._manager.updateWithResults(results);\n    });\n  }\n\n  getUsageInfo() {\n    var _this$_failedTestAsse;\n\n    if (\n      (_this$_failedTestAsse = this._failedTestAssertions) !== null &&\n      _this$_failedTestAsse !== void 0 &&\n      _this$_failedTestAsse.length\n    ) {\n      return {\n        key: 'i',\n        prompt: 'run failing tests interactively'\n      };\n    }\n\n    return null;\n  }\n\n  onKey(key) {\n    if (this._manager.isActive()) {\n      this._manager.put(key);\n    }\n  }\n\n  run(_, updateConfigAndRun) {\n    return new Promise(resolve => {\n      if (\n        !this._failedTestAssertions ||\n        this._failedTestAssertions.length === 0\n      ) {\n        resolve();\n        return;\n      }\n\n      this._manager.run(this._failedTestAssertions, failure => {\n        updateConfigAndRun({\n          mode: 'watch',\n          testNamePattern: failure ? `^${failure.fullName}$` : '',\n          testPathPattern:\n            (failure === null || failure === void 0 ? void 0 : failure.path) ||\n            ''\n        });\n\n        if (!this._manager.isActive()) {\n          resolve();\n        }\n      });\n    });\n  }\n\n  getFailedTestAssertions(results) {\n    const failedTestPaths = [];\n\n    if (\n      // skip if no failed tests\n      results.numFailedTests === 0 || // skip if missing test results\n      !results.testResults || // skip if unmatched snapshots are present\n      results.snapshot.unmatched\n    ) {\n      return failedTestPaths;\n    }\n\n    results.testResults.forEach(testResult => {\n      testResult.testResults.forEach(result => {\n        if (result.status === 'failed') {\n          failedTestPaths.push({\n            fullName: result.fullName,\n            path: testResult.testFilePath\n          });\n        }\n      });\n    });\n    return failedTestPaths;\n  }\n}\n\nexports.default = FailedTestsInteractivePlugin;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}